---
import BaseLayout from "@/layouts/BaseLayout.astro";
import Hero from "@/components/sections/Hero.astro";
import CTA from "@/components/sections/CTA.astro";
import TechShowcase from "@/components/sections/TechShowcase.astro";
import directus from "@/lib/directus";
import { readSingleton } from "@directus/sdk";

let homepage: any = null;
try {
  homepage = await directus.request(readSingleton("homepage"));
} catch {
  // Collection empty or doesn't exist — use defaults
}
---

<BaseLayout title="Arcate Labs" description="Arcate Labs - Automated demand systems built for scale. Search, software, and automation.">
  <Hero
    title={homepage?.headline ?? "Automated demand systems built for scale."}
    subtitle={homepage?.tagline ?? "Welcome to the meeting point of <mark>search, software, and automation</mark>."}
    primaryCta={{ href: homepage?.hero_primary_cta_link ?? "/contact", label: homepage?.hero_primary_cta_label ?? "Get Started" }}
    secondaryCta={{ href: homepage?.hero_secondary_cta_link ?? "/solutions", label: homepage?.hero_secondary_cta_label ?? "Our Capabilities" }}
  />

  <!-- What We Do -->
  <section class="py-24">
    <div class="container max-w-3xl mx-auto px-4 sm:px-6">
      <h2 class="text-3xl font-bold tracking-tight md:text-4xl mb-8">What We Do</h2>
      <div class="space-y-6 text-lg text-muted-foreground leading-relaxed">
        <p>
          At Arcate Labs, our team designs and operates automated demand systems that turn search intent into real business outcomes.
        </p>
        <p>
          We build scalable infrastructure across SEO, engineering, and automation so that businesses can grow without managing the complexity behind it.
        </p>
        <p>
          Whether you want a partner to help design and build a system, or you want someone to take care of it end to end, we can meet you where you are.
        </p>
      </div>
    </div>
  </section>

  <!-- Solutions -->
  <section class="py-24">
    <div class="container max-w-5xl mx-auto px-4 sm:px-6">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold leading-[1.1] md:text-5xl">Two Practices, One Goal</h2>
        <p class="mt-4 text-muted-foreground text-lg">Build systems that grow your business without growing your workload.</p>
      </div>
      <div class="grid gap-8 md:grid-cols-2">
        <a href="/solutions/operations-automation" class="group rounded-lg border bg-card p-8 transition-all hover:bg-accent/50 hover:border-primary/50 hover:shadow-lg">
          <div class="mb-4 inline-block px-3 py-1 bg-primary/10 text-primary text-sm font-medium rounded-full">
            Automation
          </div>
          <h3 class="text-2xl font-bold mb-3 group-hover:text-primary transition-colors">Operations Automation</h3>
          <p class="text-muted-foreground mb-4">Custom workflows, system integrations, and AI-powered automation that eliminate manual work and connect your tools.</p>
          <span class="text-sm font-medium text-primary group-hover:underline">Learn more &rarr;</span>
        </a>
        <a href="/solutions/seo-demand-systems" class="group rounded-lg border bg-card p-8 transition-all hover:bg-accent/50 hover:border-primary/50 hover:shadow-lg">
          <div class="mb-4 inline-block px-3 py-1 bg-primary/10 text-primary text-sm font-medium rounded-full">
            Search
          </div>
          <h3 class="text-2xl font-bold mb-3 group-hover:text-primary transition-colors">SEO Demand Systems</h3>
          <p class="text-muted-foreground mb-4">Data-driven search infrastructure that turns organic and paid channels into measurable, compounding demand.</p>
          <span class="text-sm font-medium text-primary group-hover:underline">Learn more &rarr;</span>
        </a>
      </div>
    </div>
  </section>

  <!-- How We Work -->
  <section class="py-24 bg-muted/30">
    <div class="container max-w-3xl mx-auto px-4 sm:px-6">
      <h2 class="text-3xl font-bold tracking-tight md:text-4xl mb-8">How We Work</h2>
      <div class="space-y-6 text-lg text-muted-foreground leading-relaxed">
        <p>
          Every day, people look for someone to fix a problem, provide a service, or offer care. At the same time, many businesses struggle to be found — not because they lack skill, but because the systems connecting them to customers are complicated or unreliable.
        </p>
        <p>
          We approach our work with the understanding that technology should support people, not ask them to reorganize their lives around it. Instead of managing ongoing marketing or short-term campaigns, we focus on creating structures that help the right connections happen without constant manual effort.
        </p>
        <p>
          We focus on building things that last, designing with scale in mind from the beginning, and reducing the amount of ongoing effort required to keep things running.
        </p>
      </div>
    </div>
  </section>

  <TechShowcase
    body={homepage?.showcase_content}
  />

  <CTA
    title={homepage?.cta_title ?? "Let's build your demand system."}
    description={homepage?.cta_description ?? "Whether you need a partner to design the architecture or someone to run it end to end, we're ready to talk."}
    cta={{ href: homepage?.cta_button_link ?? "/contact", label: homepage?.cta_button_label ?? "Start a Conversation" }}
  />
</BaseLayout>
